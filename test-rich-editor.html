<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rich Text Editor Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-editor {
            border: 2px solid #ccc;
            min-height: 200px;
            padding: 16px;
            direction: ltr !important;
            text-align: left !important;
            unicode-bidi: normal !important;
            writing-mode: horizontal-tb !important;
        }
        .toolbar { margin-bottom: 10px; }
        .toolbar button { margin-right: 5px; padding: 5px 10px; }
        .status { margin-top: 20px; padding: 10px; background: #f0f0f0; }
    </style>
</head>
<body>
    <h1>Rich Text Editor Test</h1>
    
    <div class="toolbar">
        <button onclick="execCmd('bold')">Bold</button>
        <button onclick="execCmd('italic')">Italic</button>
        <button onclick="execCmd('underline')">Underline</button>
        <button onclick="insertText()">Insert Text</button>
        <button onclick="clearEditor()">Clear</button>
    </div>
    
    <div 
        id="editor" 
        class="test-editor" 
        contenteditable="true"
        data-placeholder="Start typing here to test text direction..."
    >
    </div>
    
    <div class="status">
        <h3>Test Results:</h3>
        <p id="direction-test">✅ Text Direction: LTR (Left-to-Right)</p>
        <p id="typing-test">⏳ Typing Test: Type in the editor above</p>
        <p id="formatting-test">⏳ Formatting Test: Use toolbar buttons</p>
        <p id="content-test">⏳ Content Test: Content will appear here</p>
    </div>

    <script>
        const editor = document.getElementById('editor');
        
        function execCmd(command) {
            editor.focus();
            document.execCommand(command, false, null);
            updateStatus();
        }
        
        function insertText() {
            editor.focus();
            document.execCommand('insertHTML', false, 'Sample text for testing direction. ');
            updateStatus();
        }
        
        function clearEditor() {
            editor.innerHTML = '';
            updateStatus();
        }
        
        function updateStatus() {
            const content = editor.innerHTML;
            document.getElementById('content-test').textContent = 
                `✅ Content: ${content.length} characters`;
        }
        
        editor.addEventListener('input', () => {
            document.getElementById('typing-test').textContent = '✅ Typing Test: Working';
            updateStatus();
        });
        
        editor.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                if (e.key === 'b') {
                    e.preventDefault();
                    execCmd('bold');
                    document.getElementById('formatting-test').textContent = '✅ Formatting Test: Bold shortcut works';
                }
            }
        });
        
        // Test initial state
        console.log('Rich Text Editor Test Loaded');
        console.log('Editor direction:', getComputedStyle(editor).direction);
        console.log('Editor text-align:', getComputedStyle(editor).textAlign);
    </script>
</body>
</html>